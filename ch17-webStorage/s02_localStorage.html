<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>로컬 스토리지</title>
    <script type="text/javascript">
      window.onload = function () {
	    	  
	   	  //직전에 저장된 설정을 읽어옴
	   	  load_setting();
	    	  
    	  
        //폼과 이벤트 연결
        document.getElementById("frm").onsubmit = function (event) {
          //#안붙이고 아이디 명시, 쿼리셀렉터쓸때만 붙인다.
          //기본 이벤트 제거
          event.preventDefault();

          //설정값 저장
          save_setting();
        };
      };

      //로컬 스토리지에 저장된 데이터를 반환
      function load_setting() {
    	  //로컬 스토리지에서 데이터 읽기
    	  var bgColor = localStorage.getItem('bg_color');
    	  var textColor = localStorage.getItem('text_color');
    	  var textSize = localStorage.getItem('text_size');
    	  
    	  //태그에 로컬 스토리지에서 읽어온 값 설정
    	  var bg_color = document.getElementById('bg_color');
    	  bg_color.value = bgColor;
    	  
    	  var text_color = document.getElementById('text_color');
    	  text_color.value = textColor;
    	  
    	  var text_size = document.getElementById('text_size');
    	  text_size.value = textSize;
    	  
    	  //설정값을 이용해서 스타일을 태그에 반영
    	  apply_data();
    	  
      }
      //로컬 스토리지에 설정값을 저장
      function save_setting() {
        var bg_color = document.getElementById("bg_color");
        var text_color = document.getElementById("text_color");
        var text_size = document.getElementById("text_size");

        //로컬 스토리지에 설정값 저장
        localStorage.setItem("bg_color", bg_color.value);
        localStorage.setItem("text_color", text_color.value);
        localStorage.setItem("text_size", text_size.value);

        //설정값을 이용해서 스타일을 태그에 반영
        apply_data();
      }
      //스타일을 태그에 반영
      function apply_data() {
      var bg_color = document.getElementById("bg_color");
      document.body.style.backgroundColor = bg_color.value;
      
      var text_color = document.getElementById("text_color");
      document.body.style.color = text_color.value; //value가 있어야 데이터를 넣을 수 있다.
      
      var text_size = document.getElementById("text_size");
      document.body.style.fontSize = text_size.value;
      
      }
    </script>
  </head>
  <body>
    <h2>환경 설정 값 기억</h2>
    <form id="frm">
      <fieldset>
        <legend>색상/글자 크기 선택</legend>
        <ul>
          <li>
            <label for="bg_color">배경색</label>
            <input type="text" name="bg_color" id="bg_color" />
          </li>
          <li>
            <label for="text_color">글자색</label>
            <input type="text" name="text_color" id="text_color" />
          </li>
          <li>
            <label for="text_size">글자크기</label>
            <select name="text_size" id="text_size">
              <option value="16px">16px</option>
              <option value="20px">20px</option>
              <option value="24px">24px</option>
            </select>
          </li>
        </ul>
        <input type="submit" value="저장" />
      </fieldset>
    </form>
  </body>
</html>

